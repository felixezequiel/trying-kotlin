FROM gradle:8.5-jdk17

WORKDIR /app

# Copia arquivos de configuração do Gradle
COPY build.gradle.kts settings.gradle.kts ./
COPY gradle ./gradle

# Copia módulos (serão sobrescritos pelos volumes em dev)
COPY shared ./shared
COPY bff ./bff

EXPOSE 8080

# Em dev, o comando é sobrescrito pelo docker-compose.dev.yml
CMD ["gradle", ":bff:run"]
